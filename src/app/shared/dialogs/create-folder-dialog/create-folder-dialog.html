<p-dialog
  [(visible)]="visible"
  [modal]="true"
  [draggable]="false"
  [resizable]="false"
  [closable]="true"
  [style]="{ width: '420px' }"
  styleClass="dialog-create-folder">
  <ng-template #header>
    <div class="dialog-header">
      <div class="dialog-icon folder" [style.background-color]="selectedColor() + '20'">
        <i class="fa-duotone fa-solid fa-folder" [style.color]="selectedColor()"></i>
      </div>
      <div class="dialog-title-wrapper">
        <h3 class="dialog-title">Nouveau dossier</h3>
        <p class="dialog-subtitle">Créez un nouveau dossier pour organiser vos fichiers</p>
      </div>
    </div>
  </ng-template>

  <div class="dialog-content">
    <div class="form-field">
      <label for="folderName" class="field-label">
        Nom du dossier <span class="required">*</span>
      </label>
      <input
        id="folderName"
        type="text"
        pInputText
        pSize="small"
        placeholder="Ex: Documents clients"
        [ngModel]="folderName()"
        (ngModelChange)="folderName.set($event)"
        (keyup.enter)="onSubmit()"
        class="w-full" />
    </div>

    <div class="form-field">
      <label class="field-label">Couleur</label>
      <div class="color-picker">
        @for (color of colors; track color.value) {
          <button
            type="button"
            class="color-swatch"
            [class.selected]="isColorSelected(color.value)"
            [style.background-color]="color.value"
            [title]="color.name"
            (click)="selectColor(color.value)">
            @if (isColorSelected(color.value)) {
              <i class="fa-solid fa-check"></i>
            }
          </button>
        }
      </div>
    </div>
  </div>

  <ng-template #footer>
    <div class="dialog-footer">
      <p-button
        label="Annuler"
        severity="secondary"
        size="small"
        text
        (click)="close()" />
      <p-button
        label="Créer le dossier"
        size="small"
        [disabled]="!isValid"
        [loading]="isSubmitting()"
        (click)="onSubmit()" />
    </div>
  </ng-template>
</p-dialog>
