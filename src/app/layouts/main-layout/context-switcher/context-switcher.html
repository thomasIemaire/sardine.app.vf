<div class="context-switcher-container">
    <div class="context-switcher-wrapper">
        <div class="form-switcher">
            <div class="form-title">Quelle organisation souhaitez-vous utiliser ?</div>
            <div class="contexts-group">
                @for (org of displayedOrganizations(); track org.id) {
                    <app-context-item [organization]="org" (select)="onSelectOrganization($event)" />
                }
                @if (hasOverflow()) {
                    <div class="context-item-overflow">
                        <div class="context-item-overflow__picture">
                            <span>+{{ remainingCount() }}</span>
                        </div>
                    </div>
                }
            </div>
            @if (showSearch()) {
                <div class="form-search">
                    <input type="text" placeholder="Rechercher une organisation..." [value]="searchQuery()" (input)="onSearchInput($event)" />
                </div>
            }
        </div>
    </div>
    <div class="stop-ask-wrapper">
        @if (isBrowsing()) {
            <p-button label="Fermer cet écran" severity="secondary" text rounded size="small" (onClick)="closeBrowser()" />
        } @else {
            Ne plus afficher cet écran ? <p-toggle-switch [(ngModel)]="stopAsking" />
        }
    </div>
</div>
